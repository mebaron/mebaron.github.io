---
title: go操作cookie和session
type: tags
date: 2023-12-27 20:15:37
tags:
- go
- web
categories:
- 技术
---

## go操作cookie和session

### 1.cookie

cookie是由浏览器维持的，存储在客户端的一小段文本信息，伴随着用户请求和页面在web服务器和浏览器之间传递。

cookie是有时间限制的，根据生命周期的不同分成两种：会话cookie和持久cookie；如果不设置过期时间，则表示这个cookie生命周期为从创建到浏览器关闭为止，只有关闭浏览器窗口，cookie就消失了，这种生命周期为浏览会话期的cookie称为会话cookie；如果设置了过期时间，浏览器就会把cookie保存到硬盘上，关闭后再次打开浏览器，这些cookie依然有效直到超过设定的过期时间，这类cookie被称为持久cookie。

#### 1.1.go操作cookie

```go
package main

import (
	"fmt"
	"log"
	"net/http"
	"time"
)

func main() {
	http.HandleFunc("/", handleCookie)
    fmt.Println("server start!")
	err := http.ListenAndServe(":8080", nil)
	if err != nil {
		log.Fatal(err)
	}
}

func handleCookie(w http.ResponseWriter, r *http.Request) {

    // 读取cookies
	cks := r.Cookies()
	if len(cks) > 0 {
		for _, v := range cks {
			fmt.Println(v.Name, v.Value)
		}
		fmt.Fprintf(w, "already has cookie.")
	} else {
        // 设置cookies
		cookie := http.Cookie{
			Name:    "mebaron",
			Value:   "cookie",
			Expires: time.Now().Add(time.Hour),
		}
		http.SetCookie(w, &cookie)
		fmt.Fprintf(w, "do not has cookie, set new cookie.")
	}
}

```

### 2.session

session在web开发环境下指一类用在客户端与服务端之间保持状态的解决方案。session机制是一种服务端的机制，服务器使用一种类似于散列表的结构来保存信息。

#### 2.1.go操作session

```go
// go语言暂无操作session的库
// TODO: 实现go操作session的代码
```

